trigger:
  - main   # o la rama que uses

pool:
  vmImage: 'ubuntu-latest'

steps:
  # 1. Instalar Node.js
  - task: NodeTool@0
    inputs:
      versionSpec: '18.x'
    displayName: 'Instalar Node.js'

  # 2. Instalar dependencias y compilar
  - script: |
      npm install
      npm run build
    displayName: 'Compilar aplicación React (Vite)'

  # 3. Subir archivos a S3
  - task: AWSCLI@1
    inputs:
      awsCredentials: 'AWS connection'   # <-- pon aquí el nombre exacto
      regionName: 'us-east-1'                    # cambia según tu región
      awsCommand: 's3'
      awsSubCommand: 'sync'
      awsArguments: 'dist/ s3://rohi-ips-dev / --delete'
    displayName: 'Deploy a S3'
